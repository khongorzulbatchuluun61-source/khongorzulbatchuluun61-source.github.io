<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Мэдээний портал</title>
<style>
body { margin:0; font-family: Arial, sans-serif; background:#f4f4f4; color:#333; }
header { background:#0077cc; color:#fff; padding:10px 20px; display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; }
header h1 { margin:0; font-size:24px; }
nav a { color:#fff; margin-left:15px; text-decoration:none; font-weight:bold; }

/* Hero Carousel */
.hero-container { position:relative; width:100%; height:300px; overflow:hidden; margin-top:0; }
.hero-slide { position:absolute; width:100%; height:100%; object-fit:cover; transition: opacity 1s ease-in-out; opacity:0; }
.hero-slide.active { opacity:1; }

.hero-overlay { position:absolute; bottom:20px; left:20px; background:rgba(0,0,0,0.5); padding:15px; border-radius:5px; color:#fff; max-width:70%; }
.hero-overlay h3 { margin:0 0 10px; font-size:20px; }
.hero-overlay button { background:#0077cc; border:none; color:#fff; padding:8px 12px; border-radius:4px; cursor:pointer; }
.hero-overlay button:hover { background:#005fa3; }

/* Arrows */
.hero-arrow { position:absolute; top:50%; transform:translateY(-50%); font-size:30px; color:#fff; background:rgba(0,0,0,0.3); border:none; border-radius:50%; width:40px; height:40px; cursor:pointer; z-index:10; }
.hero-arrow:hover { background:rgba(0,0,0,0.6); }
.hero-arrow.left { left:10px; }
.hero-arrow.right { right:10px; }

/* Dots */
.hero-dots { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); display:flex; gap:5px; }
.hero-dot { width:12px; height:12px; border-radius:50%; background:#fff; opacity:0.5; cursor:pointer; }
.hero-dot.active { opacity:1; background:#0077cc; }

.news-container { padding:20px; display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:15px; }
.news-card { background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
.news-card h3 { margin-top:0; font-size:18px; color:#0077cc; }

footer { background:#333; color:#fff; text-align:center; padding:10px 0; margin-top:20px; }

.add-news { background:#fff; padding:15px; margin:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.add-news input, .add-news textarea { width:100%; padding:8px; margin:5px 0; border:1px solid #ccc; border-radius:4px;}
.add-news button { background:#0077cc; color:#fff; border:none; padding:10px 15px; border-radius:4px; cursor:pointer;}
.add-news button:hover { background:#005fa3;}

@media(max-width:768px){
  .hero-container { height:200px; }
  .hero-overlay { max-width:90%; font-size:14px; }
}
</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script>
</head>
<body>
<header>
<h1>Мэдээний портал</h1>
<nav>
<a href="#">Эхлэл</a>
<a href="#">Улс төр</a>
<a href="#">Эдийн засаг</a>
<a href="#">Спорт</a>
<a href="#">Нийгэм</a>
</nav>
</header>

<!-- Hero Section Carousel -->
<div class="hero-container" id="hero-container">
  <button class="hero-arrow left" id="prev-slide">&#10094;</button>
  <button class="hero-arrow right" id="next-slide">&#10095;</button>
  <div class="hero-dots" id="hero-dots"></div>
</div>

<!-- Мэдээ нэмэх форм -->
<div class="add-news">
<h3>Шинэ мэдээ нэмэх</h3>
<input type="text" id="news-title" placeholder="Гарчиг">
<input type="text" id="news-image" placeholder="Зургийн URL (Hero-д харагдана)">
<input type="text" id="news-url" placeholder="Мэдээний URL (Дэлгэрэнгүй товч руу)">
<textarea id="news-content" rows="3" placeholder="Агуулга"></textarea>
<button id="add-news-btn">Нэмэх</button>
</div>

<!-- News Section -->
<div class="news-container" id="news-container"></div>

<footer>
&copy; 2025 Мэдээний портал
</footer>

<script>
const firebaseConfig = {
apiKey: "AIzaSyD....",
authDomain: "news-dashboard.firebaseapp.com",
databaseURL: "https://news-dashboard-default-rtdb.firebaseio.com",
projectId: "news-dashboard",
storageBucket: "news-dashboard.appspot.com",
messagingSenderId: "1234567890",
appId: "1:1234567890:web:abcdef"
};

const app = firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const newsContainer = document.getElementById("news-container");
const heroContainer = document.getElementById("hero-container");
const heroDotsContainer = document.getElementById("hero-dots");

let heroSlides = [];
let heroLinks = [];
let heroOverlays = [];
let currentSlideIndex = 0;
let carouselInterval;

// Firebase-аас мэдээ унших
db.ref("news").on("value", snapshot => {
  newsContainer.innerHTML = "";
  heroContainer.querySelectorAll('.hero-slide, .hero-overlay').forEach(el=>el.remove());
  heroDotsContainer.innerHTML = "";
  heroSlides = [];
  heroLinks = [];
  heroOverlays = [];
  const data = snapshot.val();
  if(data){
    Object.keys(data).reverse().forEach(key=>{
      const news = data[key];

      // News Card
      const card = document.createElement("div");
      card.className = "news-card";
      card.innerHTML = `<h3>${news.title}</h3><p>${news.content}</p>`;
      newsContainer.appendChild(card);

      // Hero Slide
      if(news.image){
        const slide = document.createElement("img");
        slide.src = news.image;
        slide.alt = news.title;
        slide.className = "hero-slide";
        heroContainer.appendChild(slide);
        heroSlides.push(slide);
        heroLinks.push(news.url || "#");

        // Overlay
        const overlay = document.createElement("div");
        overlay.className = "hero-overlay";
        overlay.innerHTML = `<h3>${news.title}</h3><button>Дэлгэрэнгүй</button>`;
        overlay.querySelector("button").addEventListener("click", (e)=>{
          e.stopPropagation();
          if(news.url) window.open(news.url,"_blank");
        });
        heroContainer.appendChild(overlay);
        heroOverlays.push(overlay);

        // Dot
        const dot = document.createElement("div");
        dot.className = "hero-dot";
        dot.addEventListener("click", ()=> showSlide(heroSlides.indexOf(slide)));
        heroDotsContainer.appendChild(dot);
      }
    });
  } else {
    newsContainer.innerHTML = "<p>Мэдээ олдсонгүй</p>";
  }
  startHeroCarousel();
});

// Мэдээ нэмэх
document.getElementById("add-news-btn").addEventListener("click", ()=>{
  const title = document.getElementById("news-title").value.trim();
  const content = document.getElementById("news-content").value.trim();
  const image = document.getElementById("news-image").value.trim();
  const url = document.getElementById("news-url").value.trim();
  if(title && content){
    db.ref("news").push({ title, content, image, url });
    document.getElementById("news-title").value="";
    document.getElementById("news-content").value="";
    document.getElementById("news-image").value="";
    document.getElementById("news-url").value="";
  } else alert("Гарчиг болон агуулгыг бөглөнө үү!");
});

// Hero carousel functions
function startHeroCarousel(){
  if(heroSlides.length===0) return;
  heroSlides.forEach((s,i)=> s.style.opacity=i===0?'1':'0');
  heroOverlays.forEach((o,i)=> o.style.display=i===0?'block':'none');
  currentSlideIndex=0;
  updateDots();
  if(carouselInterval) clearInterval(carouselInterval);
  carouselInterval = setInterval(()=> nextSlide(),4000);
}

function showSlide(index){
  heroSlides[currentSlideIndex].style.opacity='0';
  heroOverlays[currentSlideIndex].style.display='none';
  currentSlideIndex=index;
  heroSlides[currentSlideIndex].style.opacity='1';
  heroOverlays[currentSlideIndex].style.display='block';
  updateDots();
}
function nextSlide(){ showSlide((currentSlideIndex+1)%heroSlides.length);}
function prevSlide(){ showSlide((currentSlideIndex-1+heroSlides.length)%heroSlides.length);}
function updateDots(){
  const dots = document.querySelectorAll('.hero-dot');
  dots.forEach((d,i)=> d.classList.toggle('active',i===currentSlideIndex));
}

// Arrows
document.getElementById('prev-slide').addEventListener('click', ()=> prevSlide());
document.getElementById('next-slide').addEventListener('click', ()=> nextSlide());

// Click-to-link on slide
heroContainer.addEventListener('click',(e)=>{
  if(e.target.classList.contains('hero-arrow') || e.target.classList.contains('hero-dot') || e.target.closest('.hero-overlay')) return;
  if(heroLinks[currentSlideIndex]) window.open(heroLinks[currentSlideIndex],'_blank');
});
</script>
</body>
</html>
