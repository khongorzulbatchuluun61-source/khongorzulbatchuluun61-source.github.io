<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Мэдээний портал</title>
<style>
body { margin:0; font-family: Arial, sans-serif; background:#f4f4f4; color:#333; }
header { background:#0077cc; color:#fff; padding:10px 20px; display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; }
header h1 { margin:0; font-size:24px; }
nav a { color:#fff; margin-left:15px; text-decoration:none; font-weight:bold; }

/* Hero Carousel */
.hero-container { position:relative; width:100%; height:300px; overflow:hidden; margin-top:0; cursor:pointer; }
.hero-slide { position:absolute; width:100%; height:100%; object-fit:cover; transition: opacity 1s ease-in-out; opacity:0; }
.hero-slide.active { opacity:1; }
.hero-caption { position:absolute; bottom:20px; left:20px; color:#fff; background:rgba(0,0,0,0.5); padding:10px 15px; border-radius:5px; font-size:18px; max-width:70%; }

.news-container { padding:20px; display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:15px; }
.news-card { background:#fff; padding:15px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
.news-card h3 { margin-top:0; font-size:18px; color:#0077cc; }

footer { background:#333; color:#fff; text-align:center; padding:10px 0; margin-top:20px; }

.add-news { background:#fff; padding:15px; margin:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
.add-news input, .add-news textarea { width:100%; padding:8px; margin:5px 0; border:1px solid #ccc; border-radius:4px;}
.add-news button { background:#0077cc; color:#fff; border:none; padding:10px 15px; border-radius:4px; cursor:pointer;}
.add-news button:hover { background:#005fa3;}

@media(max-width:768px){
  .hero-container { height:200px; }
  header { flex-direction:column; align-items:flex-start; }
  .hero-caption { font-size:14px; max-width:90%; }
}
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script>
</head>
<body>
<header>
<h1>Мэдээний портал</h1>
<nav>
<a href="#">Эхлэл</a>
<a href="#">Улс төр</a>
<a href="#">Эдийн засаг</a>
<a href="#">Спорт</a>
<a href="#">Нийгэм</a>
</nav>
</header>

<!-- Hero Section Carousel -->
<div class="hero-container" id="hero-container"></div>

<!-- Мэдээ нэмэх форм -->
<div class="add-news">
<h3>Шинэ мэдээ нэмэх</h3>
<input type="text" id="news-title" placeholder="Гарчиг">
<input type="text" id="news-image" placeholder="Зургийн URL (Hero-д харагдана)">
<input type="text" id="news-url" placeholder="Мэдээний URL (Hero click-д ашиглана)">
<textarea id="news-content" rows="3" placeholder="Агуулга"></textarea>
<button id="add-news-btn">Нэмэх</button>
</div>

<!-- News Section -->
<div class="news-container" id="news-container"></div>

<footer>
&copy; 2025 Мэдээний портал
</footer>

<script>
const firebaseConfig = {
apiKey: "AIzaSyD....",
authDomain: "news-dashboard.firebaseapp.com",
databaseURL: "https://news-dashboard-default-rtdb.firebaseio.com",
projectId: "news-dashboard",
storageBucket: "news-dashboard.appspot.com",
messagingSenderId: "1234567890",
appId: "1:1234567890:web:abcdef"
};

const app = firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const newsContainer = document.getElementById("news-container");
const heroContainer = document.getElementById("hero-container");

let heroSlides = [];
let heroLinks = [];

// Firebase-аас мэдээ унших
db.ref("news").on("value", snapshot => {
  newsContainer.innerHTML = "";
  heroContainer.innerHTML = "";
  heroSlides = [];
  heroLinks = [];
  const data = snapshot.val();
  if(data){
    Object.keys(data).reverse().forEach(key => {
      const news = data[key];

      // News Card
      const card = document.createElement("div");
      card.className = "news-card";
      card.innerHTML = `<h3>${news.title}</h3><p>${news.content}</p>`;
      newsContainer.appendChild(card);

      // Hero Slide
      if(news.image){
        const slide = document.createElement("img");
        slide.src = news.image;
        slide.alt = news.title;
        slide.className = "hero-slide";
        const caption = document.createElement("div");
        caption.className = "hero-caption";
        caption.textContent = news.title;
        slide.appendChild(caption);
        heroContainer.appendChild(slide);
        heroSlides.push(slide);
        heroLinks.push(news.url || "#");
      }
    });
  } else {
    newsContainer.innerHTML = "<p>Мэдээ олдсонгүй</p>";
  }
  startHeroCarousel();
});

// Мэдээ нэмэх
document.getElementById("add-news-btn").addEventListener("click", () => {
  const title = document.getElementById("news-title").value.trim();
  const content = document.getElementById("news-content").value.trim();
  const image = document.getElementById("news-image").value.trim();
  const url = document.getElementById("news-url").value.trim();
  if(title && content){
    db.ref("news").push({ title, content, image, url });
    document.getElementById("news-title").value = "";
    document.getElementById("news-content").value = "";
    document.getElementById("news-image").value = "";
    document.getElementById("news-url").value = "";
  } else {
    alert("Гарчиг болон агуулгыг бөглөнө үү!");
  }
});

// Hero carousel
let currentSlideIndex = 0;
let carouselInterval;

function startHeroCarousel(){
  heroSlides.forEach((s,i) => s.style.opacity = (i===0? '1':'0'));
  currentSlideIndex = 0;
  if(carouselInterval) clearInterval(carouselInterval);
  carouselInterval = setInterval(() => {
    heroSlides[currentSlideIndex].style.opacity = '0';
    currentSlideIndex = (currentSlideIndex +1) % heroSlides.length;
    heroSlides[currentSlideIndex].style.opacity = '1';
  }, 4000);
}

// Click-to-link functionality
heroContainer.addEventListener("click", () => {
  if(heroLinks.length > 0 && heroLinks[currentSlideIndex]){
    window.open(heroLinks[currentSlideIndex], "_blank");
  }
});
</script>
</body>
</html>
